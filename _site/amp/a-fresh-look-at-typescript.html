<!doctype html>
<html amp lang="en">
<head>
    <meta charset="utf-8">
    <title>A Fresh Look at TypeScript</title>
    <link rel="canonical" href="https://www.geekytidbits.com/a-fresh-look-at-typescript/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Poly' rel='stylesheet'>
    <style amp-custom>
        body { font-family: 'Poly', serif; }
        .site-header { background-color: #237ab2; color: #e7e9ec; padding: 5px; font-weight: 100; border-bottom: 3px solid #f68905; }
        .site-description { font-size: .5em;}        
        .post-content { padding: 10px; }
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    <script async custom-element="amp-video" src="https://cdn.ampproject.org/v0/amp-video-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
</head>

<body>
    
    <h1 class="post-title">
        <header class="site-header">
    <div class="wrapper">
        <a class="site-title" href="/">
            <amp-img src="/media/geekytidbits.png" width="383" height="46" alt="Geeky Tidbits Logo" layout="responsive"><noscript><img src="/media/geekytidbits.png" width="383" height="46" alt="Geeky Tidbits Logo"></noscript></amp-img>
        </a>
        <div class="site-description">Tidbits on software development, technology, and other geeky stuff.</div>
    </div>
</header>

    </h1>
    <div class="post-content">
      <span>
          <i>Feb 7, 2019</i>
      </span>
      <p>More and more people and projects are using TypeScript today!  That‚Äôs interesting because in the world of JavaScript it‚Äôs not too common for a project‚Äôs use to accelerate <em>years after</em> it was released (2012).</p>

<p>In the <a href="https://octoverse.github.com/">2018 GitHub Octoverse Report</a>, TypeScript reached ‚Äú#7 among top languages used on the platform overall, after making its way in the top 10 for the first time last year‚Äù.  It is also the #3 fastest growing language on GitHub.</p>

<p><amp-img src="/media/github-typescript.png" alt="2018 GitHub Octoverse Report - TypeScript Growth" width="536" height="470" layout="responsive"><noscript><img src="/media/github-typescript.png" alt="2018 GitHub Octoverse Report - TypeScript Growth" width="536" height="470"></noscript></amp-img></p>

<p>In the <a href="https://insights.stackoverflow.com/survey/2017">Stack Overflow Developer Survey Results 2017</a>, TypeScript made the top 10 Most Popular Programming Languages list.  In 2018, this category combined ‚ÄúProgramming, Scripting, and Markup Languages‚Äù so if you exclude things like CSS, HTML, and Bash, it still made the top 10 in 2018. üòè</p>

<p><amp-img src="/media/stackoverflow-typescript.png" alt="Stack Overflow Developer Survey Results 2017 - TypeScript Popularity" width="913" height="683" layout="responsive"><noscript><img src="/media/stackoverflow-typescript.png" alt="Stack Overflow Developer Survey Results 2017 - TypeScript Popularity" width="913" height="683"></noscript></amp-img></p>

<h2 id="birdseye-view">Birdseye View</h2>

<p>At its core, TypeScript is superset of JavaScript that was designed by <a href="https://en.wikipedia.org/wiki/Anders_Hejlsberg">Anders Hejlsberg</a> and initially released in 2012.  It is made up of a  <strong>language service</strong> and a <strong>type checking transpiler</strong>.  The transpiler is run with the command <code class="highlighter-rouge">tsc</code> and takes TypeScript and converts it to JavaScript.  The language service is a JavaScript based interface that development tools (think editors and CLI commands) can utilize to give development time support for things such as Intellisense, refactoring tooling, and symbol searching.  Each of these parts are incredibly useful independently but when combined are even more powerful.</p>

<h2 id="notable-features">Notable Features</h2>

<ul>
  <li>Non-nullable type checking</li>
  <li>Implicit type checking</li>
  <li>Transpile async/await to ES5/ES3</li>
  <li>Implicit types (can be used for vanilla JS)</li>
  <li>ESNext (arrow, async/await, decorators, etc.)</li>
  <li>JSX support</li>
</ul>

<h2 id="some-examples">Some Examples</h2>

<p>Below, I‚Äôll give some examples of how the type system in TypeScript can be used.  This is certainly not an exhaustive list of features but ones I think demonstrate the power and usefulness of the language without getting too advanced.</p>

<h3 id="basic-types">Basic Types</h3>

<p>The easiest part to understand of TypeScript is its type checking of basic types.  In TypeScript, you use <em>type annotations</em> to describe the type of a paramter.  In the following example, notice the <code class="highlighter-rouge">person: string</code> parameter.  That <code class="highlighter-rouge">: string</code> suffix is the type annotation.  You are telling TypeScript that only strings should be accepted as the <code class="highlighter-rouge">person</code> parameter on the <code class="highlighter-rouge">greeter</code> function.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">greeter</span><span class="p">(</span><span class="nx">person</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">"Hello, "</span> <span class="o">+</span> <span class="nx">person</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
<span class="nx">greeter</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span> <span class="c1">// ERROR: Argument of type 'number[]' is not assignable to parameter of type 'string'.</span>
</code></pre></div></div>

<p>A TypeScript error will be rasied when calling <code class="highlighter-rouge">greeter(user);</code> with an array of numbers because TypeScript knows <code class="highlighter-rouge">person</code> should only be a string.</p>

<h3 id="function-types">Function Types</h3>

<p>Functions in JavaScript are <a href="https://developer.mozilla.org/en-US/docs/Glossary/First-class_Function">first-class</a> objects and TypeScript has first-class support for type checking them.  When specifying a function type, you can specify the type of parameters it has and also the return type expected.  This is powerful.  In the following example, we tell TypeScript that the <code class="highlighter-rouge">save</code> function takes a <code class="highlighter-rouge">getUserId</code> function paramter that must accept a string parameter and must return a number.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">save</span><span class="p">(</span><span class="nx">entity</span><span class="p">,</span>
  <span class="nx">getUserId</span><span class="p">:</span> <span class="p">(</span><span class="nx">username</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">number</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">userId</span> <span class="o">=</span> <span class="nx">getUserId</span><span class="p">(</span><span class="nx">username</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">save</span><span class="p">(</span><span class="nx">entity</span><span class="p">,</span> <span class="p">(</span><span class="nx">username</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span> <span class="c1">// This anonymous function must match the type struture!</span>
  <span class="k">return</span> <span class="mi">123</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="string-valued-enums">String Valued Enums</h3>

<p>Enums are a bit foreign to the JavaScript world but it‚Äôs a shame because they make code readable and give static benefits.  TypeScript brings them to JavaScript so you can do things like this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">enum</span> <span class="nx">Color</span> <span class="p">{</span>
 <span class="nx">Red</span> <span class="o">=</span> <span class="s1">'#ff0000'</span><span class="p">,</span>
 <span class="nx">Green</span> <span class="o">=</span> <span class="s1">'#00ff00'</span><span class="p">,</span>
 <span class="nx">Blue</span> <span class="o">=</span> <span class="s1">'#0000ff'</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">myFavoriteColor</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Green</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">chosenColor</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Red</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="string-literal-types">String Literal Types</h3>

<p>A fairly recent addition to TypeScript is something called String Literal Types.  In the following example, the <code class="highlighter-rouge">direction</code> parameter of <code class="highlighter-rouge">move</code> expects a string, but not just any string.  It <em>must</em> be ‚ÄúNorth‚Äù, ‚ÄúEast‚Äù, ‚ÄúSouth‚Äù, or ‚ÄúWest‚Äù.  Passing any other string will cause a compile error!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">type</span> <span class="nx">CardinalDirection</span> <span class="o">=</span>
    <span class="s2">"North"</span> <span class="o">|</span> <span class="s2">"East"</span> <span class="o">|</span> <span class="s2">"South"</span><span class="o">|</span> <span class="s2">"West"</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">move</span><span class="p">(</span><span class="nx">distance</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">direction</span><span class="p">:</span> <span class="nx">CardinalDirection</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="nx">move</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"North"</span><span class="p">);</span>
<span class="nx">move</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">"Northwest"</span><span class="p">)</span> <span class="c1">// ERROR: Argument of type '"Northwest"' is not assignable to parameter of type 'CardinalDirection'.</span>
</code></pre></div></div>

<h3 id="interfaces">Interfaces</h3>

<p>Interfaces are really useful to provide a way to describe the shape of an object.  You can even specify that properties are optional by adding a <code class="highlighter-rouge">?</code> to the end of the property name.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nl">firstName</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">lastName</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
    <span class="nl">age</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
    <span class="nx">dob</span><span class="p">?:</span> <span class="nx">string</span><span class="p">;</span> <span class="c1">// Optional</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">newPerson</span><span class="p">:</span> <span class="nx">Person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">firstName</span><span class="p">:</span> <span class="s2">"Sue"</span><span class="p">,</span> 
  <span class="na">age</span><span class="p">:</span> <span class="mi">24</span>
<span class="p">};</span> <span class="c1">// ERROR: Type '{ firstName: string; age: number; }' is not assignable to type 'Person'.</span>

</code></pre></div></div>

<h3 id="generics">Generics</h3>

<p>Generics are all about reusability.  With them, you can design functions that are able to work with a type that is specified by a caller rather than hard-coded in.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Queue</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kr">private</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">push</span> <span class="o">=</span> <span class="p">(</span><span class="na">item</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
  <span class="nx">pop</span> <span class="o">=</span> <span class="p">():</span> <span class="nx">T</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Queue</span><span class="o">&lt;</span><span class="nx">number</span><span class="o">&gt;</span><span class="p">();</span>
<span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"1"</span><span class="p">);</span> <span class="c1">// ERROR: cannot push a string. Only numbers allowed.</span>
</code></pre></div></div>

<h3 id="strict-null-checks">Strict Null Checks</h3>

<p>If you try to reference a property that <em>could</em> be null because to haven‚Äôt given it a value, TypeScript will error out.  This is a huge deal to know this at build time!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">Member</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="nx">age</span><span class="p">?:</span> <span class="nx">number</span>
<span class="p">}</span>

<span class="nx">getMember</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">member</span><span class="p">:</span> <span class="nx">Member</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">ageString</span> <span class="o">=</span> <span class="nx">member</span><span class="p">.</span><span class="nx">age</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// ERROR: Object is possibly 'undefined'</span>
  <span class="p">})</span>
</code></pre></div></div>

<h3 id="decorators">Decorators</h3>

<p>Per the <a href="https://github.com/wycats/javascript-decorators#summary">TC39 proposal</a>:</p>
<blockquote>
  <p>Decorators make it possible to annotate and modify classes and properties at design time.</p>
</blockquote>

<p>You can think of them as giving you the ability to augment or <em>wrap</em> functionality around other functions.  Decorators are becoming standardized in JavaScript itself but have been supported in TypeScript for some time.</p>

<p>In the following example, we have a <code class="highlighter-rouge">fetch</code> method that we decorated with <code class="highlighter-rouge">@protected</code>.  This allows to to run the <code class="highlighter-rouge">protected</code> function first, and then run the <code class="highlighter-rouge">fetch</code> function.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">PeopleController</span> <span class="p">{</span>

  <span class="p">@</span><span class="nd">protected</span>
  <span class="nx">fetch</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="kr">protected</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">()){</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="mi">403</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

    </div>
    
    <footer class="site-footer">
    ¬© 2019 Brady Holt
</footer>

    <amp-analytics type="googleanalytics">
        <script type="application/json">
        {
            "vars": {
            "account": "UA-19416043-2"
            },
            "triggers": {
            "trackPageview": {
                "on": "visible",
                "request": "pageview"
            }
            }
        }
        </script>
    </amp-analytics>
</body>

</html>