<!doctype html>
<html amp lang="en">
<head>
    <meta charset="utf-8">
    <title>301 Redirect When Changing WordPress Permalink Settings</title>
    <link rel="canonical" href="https://www.geekytidbits.com/301-redirect-wordpress-permalink-settings/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Poly' rel='stylesheet'>
    <style amp-custom>
        body { font-family: 'Poly', serif; }
        .site-header { background-color: #237ab2; color: #e7e9ec; padding: 5px; font-weight: 100; border-bottom: 3px solid #f68905; }
        .site-description { font-size: .5em;}        
        .post-content { padding: 10px; }
    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    <script async custom-element="amp-video" src="https://cdn.ampproject.org/v0/amp-video-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
</head>

<body>
    
    <h1 class="post-title">
        <header class="site-header">
    <div class="wrapper">
        <a class="site-title" href="/">
            <amp-img src="/media/geekytidbits.png" width="383" height="46" alt="Geeky Tidbits Logo" layout="responsive"><noscript><img src="/media/geekytidbits.png" width="383" height="46" alt="Geeky Tidbits Logo"></noscript></amp-img>
        </a>
        <div class="site-description">Tidbits on software development, technology, and other geeky stuff.</div>
    </div>
</header>

    </h1>
    <div class="post-content">
      <span>
          <i>Feb 8, 2012</i>
      </span>
      <p>When I originally setup my WordPress site I decided to go with the “Month and name” permalink option so that my post urls would include the date they were posted.  In hindsight, I wish I would have chosen the “Post name” option initially because this is now what I prefer.  Shorter urls are better.  If someone wants to know when a post was published they can easily find that on the post content itself and don’t need to have it shown in the url.</p>

<p><amp-img src="/media/permalinks_settings.png" alt="permalinks settings" width="600" height="367" layout="responsive"><noscript><img src="/media/permalinks_settings.png" alt="permalinks settings" width="600" height="367"></noscript></amp-img></p>

<p>But once I changed this setting my old post urls were resulting in 404 responses.  Posts linked from other sites and search engines now wouldn’t come up correctly because WordPress is hosting these at a different url.</p>

<p>I looked for a easy plugin to 301 redirect requests from my old format Urls to the new format (i.e. http://www.geekytidbits.com/<strong>2011/05/geeky-post</strong> to http://www.geekytidbits.com/<strong>geeky-post</strong>) but couldn’t find one that fit the bill.</p>

<p>In the end, I simply added the following RedirectMatch rule to my root .htaccess file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;IfModule mod_rewrite.c&gt;
  RedirectMatch 301 /\d{4}/\d{2}/(.*) http://www.geekytidbits.com/$1
&lt;/IfModule&gt;
</code></pre></div></div>

<p>If you previously had used the “Day and name” setting where the actual day of the month was included in the permalink you would want to use this instead:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;IfModule mod_rewrite.c&gt;
  RedirectMatch 301 /\d{4}/\d{2}/\d{2}/(.*) http://www.geekytidbits.com/$1
&lt;/IfModule&gt;
</code></pre></div></div>

<p>If your .htaccess file contains a  # BEGIN WordPress … section, you’ll most definitely want to place this bit below the line containing # END WordPress.</p>

    </div>
    
    <footer class="site-footer">
    © 2019 Brady Holt
</footer>

    <amp-analytics type="googleanalytics">
        <script type="application/json">
        {
            "vars": {
            "account": "UA-19416043-2"
            },
            "triggers": {
            "trackPageview": {
                "on": "visible",
                "request": "pageview"
            }
            }
        }
        </script>
    </amp-analytics>
</body>

</html>